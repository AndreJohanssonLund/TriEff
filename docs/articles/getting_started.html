<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting Started with trieff • trieff</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started with trieff">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">trieff</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.8.7</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/getting_started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../articles/sim_te.html">Simulation in trieff</a></li>
    <li><a class="dropdown-item" href="../articles/calc_te.html">Calculating Triage Effectiveness</a></li>
    <li><a class="dropdown-item" href="../articles/bootstrap.html">Bootstrap Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/plot_te.html">Plotting Results</a></li>
    <li><a class="dropdown-item" href="../articles/heatmap.html">Heatmap Analysis</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-research" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Research</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-research">
<li><a class="dropdown-item" href="../articles/original_study.html">Original Study (Under Review)</a></li>
    <li><a class="dropdown-item" href="../articles/publications.html">Publications Using trieff</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/AndreJohanssonLund/trieff/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Getting Started with trieff</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/AndreJohanssonLund/trieff/blob/HEAD/vignettes/getting_started.Rmd" class="external-link"><code>vignettes/getting_started.Rmd</code></a></small>
      <div class="d-none name"><code>getting_started.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://AndreJohanssonLund.github.io/trieff/" class="external-link">trieff</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loaded trieff 0.8.7</span></span>
<span><span class="co">#&gt; System capable of parallel processing with multisession backend</span></span>
<span><span class="co">#&gt; Maximum available workers: 16</span></span>
<span><span class="co">#&gt; Note: Individual functions will determine optimal core usage at runtime</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The trieff package provides tools for analyzing and evaluating triage
effectiveness in emergency departments. At its core, it measures how
well triage systems achieve their fundamental purpose: reducing waiting
times for time-critical patients.</p>
<p>The package uses two key reference points:</p>
<ol style="list-style-type: decimal">
<li><p>The waiting time without any triage system (first-come,
first-served), defined as the mean waiting time for all
patients.</p></li>
<li><p>The theoretical minimum waiting time achievable with perfect
triage, defined as 0 waiting time.</p></li>
</ol>
<p>From these reference points, we calculate Triage Effectiveness (TE),
which creates a scale where:</p>
<ul>
<li><p>0% indicates no improvement over first-come,
first-served</p></li>
<li><p>100% indicates perfect prioritization where time-critical
patients experience no waiting</p></li>
<li><p>Negative values indicate longer waiting times than a system
without triage</p></li>
</ul>
<p>Triage Effectiveness is calculated: 1 - (mean waiting time for time
critical patients/mean waiting time for all patients)</p>
</div>
<div class="section level2">
<h2 id="basic-workflow">Basic Workflow<a class="anchor" aria-label="anchor" href="#basic-workflow"></a>
</h2>
<p>Let’s walk through a basic workflow using the included synthetic
dataset <code>sem_malmo_synth</code>, which is based on emergency
department visits at Malmö Hospital (See
<code><a href="../reference/sem_malmo_synth.html">?sem_malmo_synth</a></code>).</p>
<div class="section level3">
<h3 id="initialize-data">1. Initialize Data<a class="anchor" aria-label="anchor" href="#initialize-data"></a>
</h3>
<p>First, we need to initialize our data, which prepares it for analysis
by calculating wait times and setting up required variables:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Initialize the data</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/init.html">init</a></span><span class="op">(</span><span class="va">sem_malmo_synth</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="simulate-theoretical-wait-times">2. Simulate Theoretical Wait Times<a class="anchor" aria-label="anchor" href="#simulate-theoretical-wait-times"></a>
</h3>
<p>To understand how well the triage system performs without the effect
of changes in priority that can happen after triage we simulate
theoretical wait times. This shows what would happen if patients were
seen strictly in order of their assigned priority:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Run simulation for theoretical wait times</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sim_te.html">sim_te</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Creating segments out of dataframe 2025-02-26 07:33:30.056443"</span></span>
<span><span class="co">#&gt; [1] "Filtered to 3 segments with LOSET cases"</span></span>
<span><span class="co">#&gt; [1] "Total LOSET cases: 5491"</span></span>
<span><span class="co">#&gt; [1] "Starting multisession with 1 cores. 2025-02-26 07:33:30.178621"</span></span>
<span><span class="co">#&gt; [1] "Simulations are done! 2025-02-26 07:34:22.471567"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="calculate-triage-effectiveness">3. Calculate Triage Effectiveness<a class="anchor" aria-label="anchor" href="#calculate-triage-effectiveness"></a>
</h3>
<p>Now we can calculate both Observed Triage Effectiveness (OTE) and
Theoretical Triage Effectiveness (TTE):</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate TE metrics</span></span>
<span><span class="va">te_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc_te.html">calc_te</a></span><span class="op">(</span><span class="va">data</span>, overall_only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">te_results</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Triage Effectiveness Analysis Results</span></span>
<span><span class="co">#&gt; ===================================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Results for Overall </span></span>
<span><span class="co">#&gt; ------------------- </span></span>
<span><span class="co">#&gt; Total patients: 124311 (4.4% LOSET positive)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Classification Metrics:</span></span>
<span><span class="co">#&gt;   Sensitivity: 73.7%</span></span>
<span><span class="co">#&gt;   Specificity: 65.9%</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Triage Effectiveness Metrics:</span></span>
<span><span class="co">#&gt;   OTE: 29.9%</span></span>
<span><span class="co">#&gt;   TTE: 52.8%</span></span>
<span><span class="co">#&gt;   OTG: -23.0%</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Computation Information</span></span>
<span><span class="co">#&gt; =====================</span></span>
<span><span class="co">#&gt; Method: Direct calculation</span></span>
<span><span class="co">#&gt; Calculation time: 2025-02-26 07:34:22.534372</span></span></code></pre></div>
<p>The results show us: - OTE: How well the ED actually performed - TTE:
How well it would have performed based on triage decisions alone - OTG
(Observed-Theoretical Gap): The difference between OTE and TTE,
indicating the impact of post-triage processes</p>
</div>
<div class="section level3">
<h3 id="visualize-results">4. Visualize Results<a class="anchor" aria-label="anchor" href="#visualize-results"></a>
</h3>
<p>Finally, we can visualize these results:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a basic TE plot</span></span>
<span><span class="fu"><a href="../reference/plot_te.html">plot_te</a></span><span class="op">(</span><span class="va">te_results</span><span class="op">)</span></span></code></pre></div>
<p><img src="getting_started_files/figure-html/plot-1.png" alt="A Triage Effectiveness dumbplot" width="960"></p>
</div>
</div>
<div class="section level2">
<h2 id="next-steps">Next Steps<a class="anchor" aria-label="anchor" href="#next-steps"></a>
</h2>
<p>See the individual vignettes for each component for detailed usage,
error handling, and advanced features:</p>
<ul>
<li><p><code><a href="../articles/sim_te.html">vignette("sim_te")</a></code> for simulation details and
performance considerations</p></li>
<li><p><code><a href="../articles/calc_te.html">vignette("calc_te")</a></code> for analyzing TE
metrics</p></li>
<li><p><code><a href="../articles/bootstrap.html">vignette("bootstrap")</a></code> for statistical validation and
variance calculation</p></li>
<li><p><code><a href="../articles/plot_te.html">vignette("plot_te")</a></code> for visualization
options</p></li>
<li><p><code><a href="../articles/heatmap.html">vignette("heatmap")</a></code> for research and theoretical
analysis</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="data-requirements">Data Requirements<a class="anchor" aria-label="anchor" href="#data-requirements"></a>
</h2>
<p>To use trieff, your data needs:</p>
<ul>
<li><p>Arrival times - we recomend setting this to the time the patient
gets its priority, named “arrival”</p></li>
<li><p>Times of physician contact, named “resolve”</p></li>
<li><p>Triage priorities, in numbers 1 being highest</p></li>
<li><p>Unit assignments (if applicable)</p></li>
<li><p>Time-critical status indicators, in the trieff package designated
“loset”</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="common-issues">Common Issues<a class="anchor" aria-label="anchor" href="#common-issues"></a>
</h2>
<ul>
<li>Missing or incorrect column names -&gt; Use init() to validate data
structure</li>
<li>Unexpected TE values -&gt; Check unit groupings and LOSET
definitions</li>
</ul>
<p>See <code><a href="../reference/sem_malmo_synth.html">?sem_malmo_synth</a></code> for an example of how to structure
your data.</p>
<p>For more detailed information about specific functions, see their
respective vignettes or help pages.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by André Johansson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
