% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sim_heat.R
\name{sim_heat}
\alias{sim_heat}
\title{Simulate Triage Effectiveness over different levels of sensitivity/specificity.}
\usage{
sim_heat(
  df,
  step_size,
  n_workers = detectCores() - 1,
  pos_values_only = FALSE,
  n_loset = NULL,
  seed = NULL
)
}
\arguments{
\item{df}{A data frame containing patient data (must be initialized through init())}

\item{step_size}{Numeric. The step size for sensitivity and specificity values.
Must be one of: 25, 10, 5, 2.5, or 1. representing the percentual step in
sensitivity/specificity that is taken.}

\item{n_workers}{Integer. Number of cores to use for parallel processing.
Default is (detectCores() - 1).}

\item{pos_values_only}{Logical. If TRUE, only includes combinations where
sensitivity + specificity >= 1. Default is FALSE.}

\item{n_loset}{Integer, least number of LOSET cases in the data frame. Will duplicate
the data to reach this. Can by doing this get more LOSET cases.}

\item{seed}{Seed for reproducible heat maps (default: null - no seed)}
}
\value{
A Tibble with sensitivity, specificity and TE values
}
\description{
Efficiently generates a heatmap analyzing the relationship between sensitivity, specificity,
and Triage Effectiveness (TE). This function optimizes performance by:
\enumerate{
\item Processing only segments containing time-critical (LOSET) cases and
\item Parallelizing across sensitivity/specificity combinations
}
}
\details{
The function processes data through these key steps:
\enumerate{
\item Pre-calculation:
\itemize{
\item Computes overall mean waiting time for TE calculations
\item Identifies segments containing LOSET cases
\item Creates sensitivity/specificity combinations based on step_size
}
\item Parallel Processing:
\itemize{
\item Processes each combination independently across workers
\item For each combination:
\itemize{
\item Scholastically applies priority assignment based on sensitivity/specificity
\item Simulates queue processing for each segment
\item Calculates resulting (binary) TE value
}
}
\item Progress Tracking:
\itemize{
\item Updates progress after each segment
}
}

Performance considerations:
\itemize{
\item Large step_sizes (e.g., 25) are suitable for initial exploration
\item Smaller step_sizes provide more detailed analysis but increase computation time
\item Processing time increases with dataset size and number of combinations
}
}
\examples{
\dontrun{
# Basic usage
results <- sim_heat_fast(patient_data, step_size = 10)

# Only positive values
results <- sim_heat_fast(patient_data,
                        step_size = 10,
                        pos_values_only = TRUE)

# Adjust worker count
results <- sim_heat_fast(patient_data,
                        step_size = 10,
                        n_workers = 4)
}
}
