<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Fast Triage Efficacy Simulation — sim_te • trieff</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Fast Triage Efficacy Simulation — sim_te"><meta property="og:description" content="This function performs an optimized simulation to calculate Triage Efficacy (TE) metrics
by only simulating segments containing time-critical (LOSET-positive) cases. For segments
without LOSET cases, it uses observed wait times directly, since these segments don't
affect TE calculations. This optimization significantly reduces computation time while
maintaining identical TE results compared to the full simulation."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">trieff</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.8.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/bootstrap.html">Bootstrap Analysis with trieff</a>
    </li>
    <li>
      <a href="../articles/calc_te.html">Calculating Triage Effectiveness</a>
    </li>
    <li>
      <a href="../articles/getting_started.html">Getting Started with trieff</a>
    </li>
    <li>
      <a href="../articles/heatmap.html">Heatmap Analysis in trieff</a>
    </li>
    <li>
      <a href="../articles/plot_te.html">Plotting Triage Effectiveness Results</a>
    </li>
    <li>
      <a href="../articles/sim_te.html">Simulation in trieff</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/yourusername/trieff/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Fast Triage Efficacy Simulation</h1>
    <small class="dont-index">Source: <a href="https://github.com/yourusername/trieff/blob/HEAD/R/sim_te.R" class="external-link"><code>R/sim_te.R</code></a></small>
    <div class="hidden name"><code>sim_te.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function performs an optimized simulation to calculate Triage Efficacy (TE) metrics
by only simulating segments containing time-critical (LOSET-positive) cases. For segments
without LOSET cases, it uses observed wait times directly, since these segments don't
affect TE calculations. This optimization significantly reduces computation time while
maintaining identical TE results compared to the full simulation.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sim_te</span><span class="op">(</span><span class="va">df</span>, tte <span class="op">=</span> <span class="cn">TRUE</span>, btte <span class="op">=</span> <span class="cn">FALSE</span>, n_workers <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a></dt>
<dd><p>A data frame containing patient data, including:</p><ul><li><p>id: Unique patient identifier</p></li>
<li><p>arrival_minute: Minutes since start of study period until patient arrival</p></li>
<li><p>resolve_minute: Minutes since start until patient sees physician</p></li>
<li><p>priority: Original triage priority</p></li>
<li><p>priority_binary: Binary priority (typically 1 for high, 2 for low)</p></li>
<li><p>loset: Logical indicating if patient is time-critical per LOSET criteria</p></li>
<li><p>observed_wait_time: Actual waiting time in minutes</p></li>
</ul></dd>


<dt id="arg-tte">tte<a class="anchor" aria-label="anchor" href="#arg-tte"></a></dt>
<dd><p>Logical. If TRUE, calculates Theoretical Triage Efficacy (TTE). Default is TRUE.</p></dd>


<dt id="arg-btte">btte<a class="anchor" aria-label="anchor" href="#arg-btte"></a></dt>
<dd><p>Logical. If TRUE, calculates Binary Theoretical Triage Efficacy (BTTE). Default is FALSE.</p></dd>


<dt id="arg-n-workers">n_workers<a class="anchor" aria-label="anchor" href="#arg-n-workers"></a></dt>
<dd><p>Integer. Number of cores to use for parallel processing. Default is 1.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A data frame with the original patient data and additional columns:</p><ul><li><p>theoretical_wait_time: Simulated wait time based on original priorities (if tte=TRUE)</p></li>
<li><p>binary_theoretical_wait_time: Simulated wait time based on binary priorities (if btte=TRUE)</p></li>
</ul></div>
    <div id="details">
    <h2>Details</h2>
    <p>This function optimizes the standard sim_te simulation by:</p><ol><li><p>Only simulating segments containing LOSET-positive cases</p></li>
<li><p>Using observed wait times for segments without LOSET cases</p></li>
<li><p>Maintaining minimal data during simulation to reduce memory usage</p></li>
</ol><p>This optimization is valid because TE calculation only depends on the waiting times
of time-critical patients relative to the overall mean. Since segments without
LOSET cases contribute identically to the mean whether simulated or observed,
simulating these segments is unnecessary.</p>
<p>Key steps in the process:</p><ol><li><p>Extract minimal required data for simulation</p></li>
<li><p>Create and identify segments containing LOSET cases</p></li>
<li><p>Simulate only LOSET-containing segments</p></li>
<li><p>Copy observed wait times for non-simulated segments</p></li>
<li><p>Combine results maintaining all original data</p></li>
</ol></div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code>sim_te</code> for the full simulation approach</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Basic usage with default settings</span></span></span>
<span class="r-in"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">sim_te_fast</span><span class="op">(</span><span class="va">patient_data</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Calculate both TTE and BTTE</span></span></span>
<span class="r-in"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">sim_te_fast</span><span class="op">(</span><span class="va">patient_data</span>, tte <span class="op">=</span> <span class="cn">TRUE</span>, btte <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by André Johansson.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

