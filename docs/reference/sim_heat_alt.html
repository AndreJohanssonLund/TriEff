<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Simulate Triage Effectiveness including potential normalization techniques - mainly for validation and methodological research — sim_heat_alt • trieff</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Simulate Triage Effectiveness including potential normalization techniques - mainly for validation and methodological research — sim_heat_alt"><meta name="description" content="Performs simulations to analyze how Triage Effectiveness (TE) varies with different
combinations of sensitivity and specificity. The function provides options for
alternative TE calculations and can store complete simulation data for detailed analysis."><meta property="og:description" content="Performs simulations to analyze how Triage Effectiveness (TE) varies with different
combinations of sensitivity and specificity. The function provides options for
alternative TE calculations and can store complete simulation data for detailed analysis."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">trieff</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/getting_started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../articles/sim_te.html">Simulation in trieff</a></li>
    <li><a class="dropdown-item" href="../articles/calc_te.html">Calculating Triage Effectiveness</a></li>
    <li><a class="dropdown-item" href="../articles/bootstrap.html">Bootstrap Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/plot_te.html">Plotting Results</a></li>
    <li><a class="dropdown-item" href="../articles/heatmap.html">Heatmap Analysis</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-research" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Research</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-research"><li><a class="dropdown-item" href="../articles/original_study.html">Original Study (Under Review)</a></li>
    <li><a class="dropdown-item" href="../articles/publications.html">Publications Using trieff</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/AndreJohanssonLund/trieff/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Simulate Triage Effectiveness including potential normalization techniques - mainly for validation and methodological research</h1>
      <small class="dont-index">Source: <a href="https://github.com/AndreJohanssonLund/trieff/blob/HEAD/R/sim_heat_alt.R" class="external-link"><code>R/sim_heat_alt.R</code></a></small>
      <div class="d-none name"><code>sim_heat_alt.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Performs simulations to analyze how Triage Effectiveness (TE) varies with different
combinations of sensitivity and specificity. The function provides options for
alternative TE calculations and can store complete simulation data for detailed analysis.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sim_heat_alt</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  <span class="va">step_size</span>,</span>
<span>  n_workers <span class="op">=</span> <span class="fu">detectCores</span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span>,</span>
<span>  include_dataframes <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  alt_calc <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  pos_values_only <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  n_loset <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a></dt>
<dd><p>Data frame containing patient data (must be initialized through init())</p></dd>


<dt id="arg-step-size">step_size<a class="anchor" aria-label="anchor" href="#arg-step-size"></a></dt>
<dd><p>Numeric. The step size for sensitivity and specificity values.
Must be one of: 25, 10, 5, 2.5, or 1.</p></dd>


<dt id="arg-n-workers">n_workers<a class="anchor" aria-label="anchor" href="#arg-n-workers"></a></dt>
<dd><p>Integer. Number of cores to use for parallel processing.
Default is (detectCores() - 1).</p></dd>


<dt id="arg-include-dataframes">include_dataframes<a class="anchor" aria-label="anchor" href="#arg-include-dataframes"></a></dt>
<dd><p>Logical. If TRUE, includes complete simulation data frames
in output for detailed analysis. Default is FALSE to minimize memory usage.</p></dd>


<dt id="arg-alt-calc">alt_calc<a class="anchor" aria-label="anchor" href="#arg-alt-calc"></a></dt>
<dd><p>Logical. If TRUE, calculates alternative TE metrics using cube root,
log, and median-based normalization. Default is FALSE.</p></dd>


<dt id="arg-pos-values-only">pos_values_only<a class="anchor" aria-label="anchor" href="#arg-pos-values-only"></a></dt>
<dd><p>Logical. If TRUE, only includes combinations where
sensitivity + specificity &gt;= 1. Default is FALSE.</p></dd>


<dt id="arg-n-loset">n_loset<a class="anchor" aria-label="anchor" href="#arg-n-loset"></a></dt>
<dd><p>Integer, least number of LOSET cases in the datafram. Will duplicate
the data to reach this.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>Seed for reprorucible heatmaps (default: null - no seed)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A tibble containing:</p><ul><li><p>sensitivity: Sensitivity value for the simulation</p></li>
<li><p>specificity: Specificity value for the simulation</p></li>
<li><p>te: Standard Triage Effectiveness value</p></li>
<li><p>te_cube: (If alt_calc=TRUE) TE with cube root normalization</p></li>
<li><p>te_log: (If alt_calc=TRUE) TE with log normalization</p></li>
<li><p>te_median_local: (If alt_calc=TRUE) TE using median-based calculation using the simulations median</p></li>
<li><p>te_median_global: (If alt_calc=TRUE) TE using median-based calculations using the median_all from 100% sensitivity/0%specificity</p></li>
<li><p>sim_data: (If include_dataframes=TRUE) Complete simulation data frames</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function performs these key steps:
0. Optional, (if alt_calc=TRUE) runs a simulation to evaluate median TE at
sensitivity = 100%, specificity = 0% - i.e a first come, first serve ED. This
acts like the denominator for the global median calculation.</p><ol><li><p>Creates combinations of sensitivity/specificity values based on step_size</p></li>
<li><p>Identifies segments containing time-critical (LOSET) cases</p></li>
<li><p>Processes each combination in parallel:</p><ul><li><p>Assigns priorities based on sensitivity/specificity</p></li>
<li><p>Simulates queue processing</p></li>
<li><p>Calculates TE metrics</p></li>
</ul></li>
<li><p>Returns combined results in a tibble format</p></li>
</ol><p>Alternative TE calculations (when alt_calc=TRUE):</p><ul><li><p>Cube root: Normalizes wait times using cube root transformation</p></li>
<li><p>Log: Normalizes wait times using log transformation</p></li>
<li><p>Median: Uses median instead of mean for central tendency</p></li>
</ul><p>Performance considerations:</p><ul><li><p>Large step_sizes (e.g., 25) are suitable for initial exploration</p></li>
<li><p>Smaller step_sizes provide more detailed analysis but increase computation time</p></li>
<li><p>Setting include_dataframes=TRUE significantly increases memory usage</p></li>
<li><p>Processing time increases with dataset size and number of combinations</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Basic usage</span></span></span>
<span class="r-in"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="sim_heat.html">sim_heat</a></span><span class="op">(</span><span class="va">patient_data</span>, step_size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># With alternative calculations</span></span></span>
<span class="r-in"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="sim_heat.html">sim_heat</a></span><span class="op">(</span><span class="va">patient_data</span>,</span></span>
<span class="r-in"><span>                    step_size <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>                    alt_calc <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Include complete simulation data</span></span></span>
<span class="r-in"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="sim_heat.html">sim_heat</a></span><span class="op">(</span><span class="va">patient_data</span>,</span></span>
<span class="r-in"><span>                    step_size <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>                    include_dataframes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Only positive TE combinations</span></span></span>
<span class="r-in"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="sim_heat.html">sim_heat</a></span><span class="op">(</span><span class="va">patient_data</span>,</span></span>
<span class="r-in"><span>                    step_size <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>                    pos_values_only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by André Johansson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

