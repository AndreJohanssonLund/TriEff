<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Simulate Triage Effectiveness Across Sensitivity/Specificity Combinations — sim_heat_alt • trieff</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Simulate Triage Effectiveness Across Sensitivity/Specificity Combinations — sim_heat_alt"><meta property="og:description" content="Performs simulations to analyze how Triage Effectiveness (TE) varies with different
combinations of sensitivity and specificity. The function provides options for
alternative TE calculations and can store complete simulation data for detailed analysis."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">trieff</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.8.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/bootstrap.html">Bootstrap Analysis with trieff</a>
    </li>
    <li>
      <a href="../articles/calc_te.html">Calculating Triage Effectiveness</a>
    </li>
    <li>
      <a href="../articles/getting_started.html">Getting Started with trieff</a>
    </li>
    <li>
      <a href="../articles/heatmap.html">Heatmap Analysis in trieff</a>
    </li>
    <li>
      <a href="../articles/plot_te.html">Plotting Triage Effectiveness Results</a>
    </li>
    <li>
      <a href="../articles/sim_te.html">Simulation in trieff</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/yourusername/trieff/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Simulate Triage Effectiveness Across Sensitivity/Specificity Combinations</h1>
    <small class="dont-index">Source: <a href="https://github.com/yourusername/trieff/blob/HEAD/R/sim_heat_alt.R" class="external-link"><code>R/sim_heat_alt.R</code></a></small>
    <div class="hidden name"><code>sim_heat_alt.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Performs simulations to analyze how Triage Effectiveness (TE) varies with different
combinations of sensitivity and specificity. The function provides options for
alternative TE calculations and can store complete simulation data for detailed analysis.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sim_heat_alt</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  <span class="va">step_size</span>,</span>
<span>  n_workers <span class="op">=</span> <span class="fu">detectCores</span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span>,</span>
<span>  include_dataframes <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  alt_calc <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  pos_values_only <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  n_loset <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a></dt>
<dd><p>Data frame containing patient data (must be initialized through init())</p></dd>


<dt id="arg-step-size">step_size<a class="anchor" aria-label="anchor" href="#arg-step-size"></a></dt>
<dd><p>Numeric. The step size for sensitivity and specificity values.
Must be one of: 25, 10, 5, 2.5, or 1.</p></dd>


<dt id="arg-n-workers">n_workers<a class="anchor" aria-label="anchor" href="#arg-n-workers"></a></dt>
<dd><p>Integer. Number of cores to use for parallel processing.
Default is (detectCores() - 1).</p></dd>


<dt id="arg-include-dataframes">include_dataframes<a class="anchor" aria-label="anchor" href="#arg-include-dataframes"></a></dt>
<dd><p>Logical. If TRUE, includes complete simulation data frames
in output for detailed analysis. Default is FALSE to minimize memory usage.</p></dd>


<dt id="arg-alt-calc">alt_calc<a class="anchor" aria-label="anchor" href="#arg-alt-calc"></a></dt>
<dd><p>Logical. If TRUE, calculates alternative TE metrics using cube root,
log, and median-based normalization. Default is FALSE.</p></dd>


<dt id="arg-pos-values-only">pos_values_only<a class="anchor" aria-label="anchor" href="#arg-pos-values-only"></a></dt>
<dd><p>Logical. If TRUE, only includes combinations where
sensitivity + specificity &gt;= 1. Default is FALSE.</p></dd>


<dt id="arg-n-loset">n_loset<a class="anchor" aria-label="anchor" href="#arg-n-loset"></a></dt>
<dd><p>Integer, least number of LOSET cases in the datafram. Will duplicate
the data to reach this.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>Seed for reprorucible heatmaps (default: null - no seed)</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A tibble containing:</p><ul><li><p>sensitivity: Sensitivity value for the simulation</p></li>
<li><p>specificity: Specificity value for the simulation</p></li>
<li><p>te: Standard Triage Effectiveness value</p></li>
<li><p>te_cube: (If alt_calc=TRUE) TE with cube root normalization</p></li>
<li><p>te_log: (If alt_calc=TRUE) TE with log normalization</p></li>
<li><p>te_median_local: (If alt_calc=TRUE) TE using median-based calculation using the simulations median</p></li>
<li><p>te_median_global: (If alt_calc=TRUE) TE using median-based calculations using the median_all from 100% sensitivity/0%specificity</p></li>
<li><p>sim_data: (If include_dataframes=TRUE) Complete simulation data frames</p></li>
</ul></div>
    <div id="details">
    <h2>Details</h2>
    <p>The function performs these key steps:</p><ol><li><p>Creates combinations of sensitivity/specificity values based on step_size</p></li>
<li><p>Identifies segments containing time-critical (LOSET) cases</p></li>
<li><p>Processes each combination in parallel:</p><ul><li><p>Assigns priorities based on sensitivity/specificity</p></li>
<li><p>Simulates queue processing</p></li>
<li><p>Calculates TE metrics</p></li>
</ul></li>
<li><p>Returns combined results in a tibble format</p></li>
</ol><p>Alternative TE calculations (when alt_calc=TRUE):</p><ul><li><p>Cube root: Normalizes wait times using cube root transformation</p></li>
<li><p>Log: Normalizes wait times using log transformation</p></li>
<li><p>Median: Uses median instead of mean for central tendency</p></li>
</ul><p>Performance considerations:</p><ul><li><p>Large step_sizes (e.g., 25) are suitable for initial exploration</p></li>
<li><p>Smaller step_sizes provide more detailed analysis but increase computation time</p></li>
<li><p>Setting include_dataframes=TRUE significantly increases memory usage</p></li>
<li><p>Processing time increases with dataset size and number of combinations</p></li>
</ul></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Basic usage</span></span></span>
<span class="r-in"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="sim_heat.html">sim_heat</a></span><span class="op">(</span><span class="va">patient_data</span>, step_size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># With alternative calculations</span></span></span>
<span class="r-in"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="sim_heat.html">sim_heat</a></span><span class="op">(</span><span class="va">patient_data</span>,</span></span>
<span class="r-in"><span>                    step_size <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>                    alt_calc <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Include complete simulation data</span></span></span>
<span class="r-in"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="sim_heat.html">sim_heat</a></span><span class="op">(</span><span class="va">patient_data</span>,</span></span>
<span class="r-in"><span>                    step_size <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>                    include_dataframes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Only positive TE combinations</span></span></span>
<span class="r-in"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="sim_heat.html">sim_heat</a></span><span class="op">(</span><span class="va">patient_data</span>,</span></span>
<span class="r-in"><span>                    step_size <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>                    pos_values_only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by André Johansson.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

