% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sim_te.R
\name{sim_te}
\alias{sim_te}
\title{Fast Triage Efficacy Simulation}
\usage{
sim_te(df, tte = TRUE, btte = FALSE, n_workers = 1)
}
\arguments{
\item{df}{A data frame containing patient data, including:
\itemize{
\item id: Unique patient identifier
\item arrival_minute: Minutes since start of study period until patient arrival
\item resolve_minute: Minutes since start until patient sees physician
\item priority: Original triage priority
\item priority_binary: Binary priority (typically 1 for high, 2 for low)
\item loset: Logical indicating if patient is time-critical per LOSET criteria
\item observed_wait_time: Actual waiting time in minutes
}}

\item{tte}{Logical. If TRUE, calculates Theoretical Triage Efficacy (TTE). Default is TRUE.}

\item{btte}{Logical. If TRUE, calculates Binary Theoretical Triage Efficacy (BTTE). Default is FALSE.}

\item{n_workers}{Integer. Number of cores to use for parallel processing. Default is 1.}
}
\value{
A data frame with the original patient data and additional columns:
\itemize{
\item theoretical_wait_time: Simulated wait time based on original priorities (if tte=TRUE)
\item binary_theoretical_wait_time: Simulated wait time based on binary priorities (if btte=TRUE)
}
}
\description{
This function performs an optimized simulation to calculate Triage Efficacy (TE) metrics
by only simulating segments containing time-critical (LOSET-positive) cases. For segments
without LOSET cases, it uses observed wait times directly, since these segments don't
affect TE calculations. This optimization significantly reduces computation time while
maintaining identical TE results compared to the full simulation.
}
\details{
This function optimizes the standard sim_te simulation by:
\enumerate{
\item Only simulating segments containing LOSET-positive cases
\item Using observed wait times for segments without LOSET cases
\item Maintaining minimal data during simulation to reduce memory usage
}

This optimization is valid because TE calculation only depends on the waiting times
of time-critical patients relative to the overall mean. Since segments without
LOSET cases contribute identically to the mean whether simulated or observed,
simulating these segments is unnecessary.

Key steps in the process:
\enumerate{
\item Extract minimal required data for simulation
\item Create and identify segments containing LOSET cases
\item Simulate only LOSET-containing segments
\item Copy observed wait times for non-simulated segments
\item Combine results maintaining all original data
}
}
\examples{
\dontrun{
# Basic usage with default settings
results <- sim_te_fast(patient_data)

# Calculate both TTE and BTTE
results <- sim_te_fast(patient_data, tte = TRUE, btte = TRUE)
}

}
\seealso{
\code{\link{sim_te}} for the full simulation approach
}
