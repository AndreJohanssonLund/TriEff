% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sim_heat.R
\name{sim_heat}
\alias{sim_heat}
\title{Fast Heatmap Generation for Triage Effectiveness Analysis}
\usage{
sim_heat(
  df,
  step_size,
  n_workers = detectCores() - 1,
  pos_values_only = FALSE,
  n_loset = NULL,
  seed = NULL
)
}
\arguments{
\item{df}{A data frame containing patient data (must be initialized through init())}

\item{step_size}{Numeric. The step size for sensitivity and specificity values.
Must be one of: 25, 10, 5, 2.5, or 1.}

\item{n_workers}{Integer. Number of cores to use for parallel processing.
Default is (detectCores() - 1).}

\item{pos_values_only}{Logical. If TRUE, only includes combinations where
sensitivity + specificity >= 1. Default is FALSE.}

\item{n_loset}{Integer, least number of LOSET cases in the datafram. Will duplicate
the data to reach this.}

\item{seed}{Seed for reprorucible heatmaps (default: null - no seed)}
}
\value{
A Tibble with sensitivity, specificity and TE values
}
\description{
Efficiently generates a heatmap analyzing the relationship between sensitivity, specificity,
and Triage Effectiveness (TE). This function optimizes performance by:
\enumerate{
\item Processing only segments containing time-critical (LOSET) cases
\item Parallelizing across sensitivity/specificity combinations
\item Using small batch sizes for frequent progress updates
}
}
\details{
The function processes data through these key steps:
\enumerate{
\item Pre-calculation:
\itemize{
\item Computes overall mean waiting time for TE calculations
\item Identifies segments containing LOSET cases
\item Creates sensitivity/specificity combinations based on step_size
}
\item Parallel Processing:
\itemize{
\item Divides combinations into small batches (2-3 combinations each)
\item Processes each combination independently across workers
\item For each combination:
\itemize{
\item Applies priority assignment based on sensitivity/specificity
\item Simulates queue processing for each segment
\item Calculates resulting TE value
}
}
\item Progress Tracking:
\itemize{
\item Updates progress after each small batch
\item Enables accurate progress estimation for long-running analyses
}
}
}
\examples{
\dontrun{
# Basic usage
results <- sim_heat_fast(patient_data, step_size = 10)

# Only positive values
results <- sim_heat_fast(patient_data,
                        step_size = 10,
                        pos_values_only = TRUE)

# Adjust worker count
results <- sim_heat_fast(patient_data,
                        step_size = 10,
                        n_workers = 4)
}
}
