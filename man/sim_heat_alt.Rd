% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sim_heat_alt.R
\name{sim_heat_alt}
\alias{sim_heat_alt}
\title{Simulate Triage Effectiveness including potential normalization techniques - mainly for validation and methodological research}
\usage{
sim_heat_alt(
  df,
  step_size,
  n_workers = detectCores() - 1,
  include_dataframes = FALSE,
  alt_calc = FALSE,
  pos_values_only = FALSE,
  n_loset = NULL,
  seed = NULL
)
}
\arguments{
\item{df}{Data frame containing patient data (must be initialized through init())}

\item{step_size}{Numeric. The step size for sensitivity and specificity values.
Must be one of: 25, 10, 5, 2.5, or 1.}

\item{n_workers}{Integer. Number of cores to use for parallel processing.
Default is (detectCores() - 1).}

\item{include_dataframes}{Logical. If TRUE, includes complete simulation data frames
in output for detailed analysis. Default is FALSE to minimize memory usage.}

\item{alt_calc}{Logical. If TRUE, calculates alternative TE metrics using cube root,
log, and median-based normalization. Default is FALSE.}

\item{pos_values_only}{Logical. If TRUE, only includes combinations where
sensitivity + specificity >= 1. Default is FALSE.}

\item{n_loset}{Integer, least number of LOSET cases in the datafram. Will duplicate
the data to reach this.}

\item{seed}{Seed for reprorucible heatmaps (default: null - no seed)}
}
\value{
A tibble containing:
\itemize{
\item sensitivity: Sensitivity value for the simulation
\item specificity: Specificity value for the simulation
\item te: Standard Triage Effectiveness value
\item te_cube: (If alt_calc=TRUE) TE with cube root normalization
\item te_log: (If alt_calc=TRUE) TE with log normalization
\item te_median_local: (If alt_calc=TRUE) TE using median-based calculation using the simulations median
\item te_median_global: (If alt_calc=TRUE) TE using median-based calculations using the median_all from 100\% sensitivity/0\%specificity
\item sim_data: (If include_dataframes=TRUE) Complete simulation data frames
}
}
\description{
Performs simulations to analyze how Triage Effectiveness (TE) varies with different
combinations of sensitivity and specificity. The function provides options for
alternative TE calculations and can store complete simulation data for detailed analysis.
}
\details{
The function performs these key steps:
0. Optional, (if alt_calc=TRUE) runs a simulation to evaluate median TE at
sensitivity = 100\%, specificity = 0\% - i.e a first come, first serve ED. This
acts like the denominator for the global median calculation.
\enumerate{
\item Creates combinations of sensitivity/specificity values based on step_size
\item Identifies segments containing time-critical (LOSET) cases
\item Processes each combination in parallel:
\itemize{
\item Assigns priorities based on sensitivity/specificity
\item Simulates queue processing
\item Calculates TE metrics
}
\item Returns combined results in a tibble format
}

Alternative TE calculations (when alt_calc=TRUE):
\itemize{
\item Cube root: Normalizes wait times using cube root transformation
\item Log: Normalizes wait times using log transformation
\item Median: Uses median instead of mean for central tendency
}

Performance considerations:
\itemize{
\item Large step_sizes (e.g., 25) are suitable for initial exploration
\item Smaller step_sizes provide more detailed analysis but increase computation time
\item Setting include_dataframes=TRUE significantly increases memory usage
\item Processing time increases with dataset size and number of combinations
}
}
\examples{
\dontrun{
# Basic usage
results <- sim_heat(patient_data, step_size = 10)

# With alternative calculations
results <- sim_heat(patient_data,
                    step_size = 10,
                    alt_calc = TRUE)

# Include complete simulation data
results <- sim_heat(patient_data,
                    step_size = 10,
                    include_dataframes = TRUE)

# Only positive TE combinations
results <- sim_heat(patient_data,
                    step_size = 10,
                    pos_values_only = TRUE)
}

}
